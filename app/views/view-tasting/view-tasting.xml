<Page xmlns="http://schemas.nativescript.org/tns.xsd"
        xmlns:gcp="components/gradient-color-picker"
        xmlns:fr="components/final-rating"
        xmlns:vs="components/values-selector"
		navigatedTo="navigatedTo">
  <Page.actionBar>
	<ActionBar title="{{ 'Vin ' + wineTasting.wineType.label }}">
	  <NavigationButton icon="res://ic_arrow_back_white_24dp" tap="cancel"/>
	  <ActionBar.actionItems>
        <ActionItem text="Modifier"
                    ios.position="right"
                    android.position="popup"
                    tap="onEditTasting"
                    visibility="visible" />
        <ActionItem text="Supprimer"
                    ios.position="right"
                    android.position="popup"
                    tap="onDeleteTasting"
                    visibility="visible" />
	  </ActionBar.actionItems>
	</ActionBar>
  </Page.actionBar>
  <TabView selectedColor="#FFFFFF">
   <TabView.items>
	 <TabViewItem title="Vin">
	   <TabViewItem.view>
		<ScrollView>
			<GridLayout columns="auto,*" rows="*,*,*,*,*,*,*,*,*,auto,*" class="tab-view-content">
				<TextField text="{{ wineTasting.cuvee }}" hint="Cuvée" colspan="2" isEnabled="false" />
                <TextField text="{{ wineTasting.estate }}" hint="Domaine" row="1" colspan="2" isEnabled="false" />
                <TextField text="{{ wineTasting.region }}" hint="Région" row="2" colspan="2" isEnabled="false" />
				<TextField text="{{ (wineTasting.country || {}).label }}" hint="Pays" row="3" colspan="2" isEnabled="false"/>
                <Label text="{{ wineTasting.year ? wineTasting.year : 'Année' }}" row="4" class="criterias-title-no-margin" width="70" />
				<Slider value="{{ wineTasting.year }}" minValue="1950" maxValue="2016" row="4" col="1" class="criterias-margin" isEnabled="false" />
				<Label text="{{ wineTasting.alcohol ? wineTasting.alcohol + '%' : '% Alcool' }}" row="5" class="criterias-title-no-margin" width="70" />
				<Slider id="alcohol-slider" value="{{ alcoholValue }}" minValue="30" maxValue="180" row="5" col="1" class="criterias-margin" isEnabled="false" />
				<Label text="Biologique" row="6" colspan="2" class="criterias-title" visibility="{{ wineTasting.isBiologic ? 'visible' : 'collapse' }}" />
				<Label text="✓" row="6" col="1" class="criterias-label" visibility="{{ wineTasting.isBiologic ? 'visible' : 'collapse' }}" />
				<Label text="Biodynamique" row="7" colspan="2" class="criterias-title" visibility="{{ wineTasting.isBiodynamic ? 'visible' : 'collapse' }}" />
                <Label text="✓" row="7" col="1" class="criterias-label" visibility="{{ wineTasting.isBiodynamic ? 'visible' : 'collapse' }}" />
                <Label text="Cépages" class="criterias-title" row="8" />
				<vs:ValuesSelector items="{{ wineTasting.grapes }}" deleteOnClick="true" row="9" colspan="2" isEnabled="false" />
				<TextView text="{{ wineTasting.wineTabNotes }}" hint="Commentaires" row="10" colspan="2" isEnabled="false" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Aspect">
	   <TabViewItem.view>
		  <ScrollView>
            <GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*,auto,*,auto,auto" columns="*, auto">
                <StackLayout visibility="{{ wineTasting.color ? 'visible' : 'collapse' }}" backgroundColor="{{wineTasting.color}}" colspan="2" height="96" style="margin: 8;" />
				<Label text="Limpidité" class="criterias-title" row="1" colspan="2" />
				<vs:ValuesSelector items="{{ wineTasting.limpidities }}" deleteOnClick="true" row="2" colspan="2" isEnabled="false" />
				<Label text="Brillance" class="criterias-title" row="3" colspan="2" />
				<vs:ValuesSelector items="{{ wineTasting.shines }}" deleteOnClick="true" row="4" colspan="2" isEnabled="false" />
                <Label text="Larmes" class="criterias-title" row="5" colspan="2" />
				<vs:ValuesSelector items="{{ wineTasting.tears }}" deleteOnClick="true" row="6" colspan="2" isEnabled="false" />
                <Label text="Bulles" class="criterias-title" row="7" />
				<vs:ValuesSelector items="{{ wineTasting.bubbles }}" deleteOnClick="true" row="8" colspan="2" isEnabled="false" />
				<TextView text="{{ wineTasting.sightTabNotes }}" hint="Commentaires" row="9" colspan="2" isEnabled="false" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Arômes">
	   <TabViewItem.view>
		<ScrollView>
			<GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*">
                <Label text="Arômes" class="criterias-title" />
				<vs:ValuesSelector items="{{ wineTasting.aromas }}" deleteOnClick="true" row="1" isEnabled="false" />
                <Label text="Défauts" class="criterias-title" row="2" />
				<vs:ValuesSelector items="{{ wineTasting.defects }}" deleteOnClick="true" row="3" isEnabled="false" />
				<Label text="Intensité" row="4" class="criterias-title" />
				<vs:ValuesSelector items="{{ wineTasting.intensities }}" deleteOnClick="true" row="5" isEnabled="false" />
				<TextView text="{{ wineTasting.smellTabNotes }}" hint="Commentaires" row="6" isEnabled="false" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Saveurs">
	   <TabViewItem.view>
		  <ScrollView>
			<GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*">
                <Label text="Attaque" class="criterias-title" />
                <vs:ValuesSelector items="{{ wineTasting.attacks }}" deleteOnClick="true" row="1" isEnabled="false" />
                <Label text="Equilibre" class="criterias-title" row="2" />
                <vs:ValuesSelector items="{{ wineTasting.balances }}" deleteOnClick="true" row="3" isEnabled="false" visibility="{{ (wineTasting.wineType.code === 'RED' || wineTasting.wineType.code === 'ROSE') ? 'visible' : 'collapse'}}" />
                <vs:ValuesSelector items="{{ wineTasting.balances }}" deleteOnClick="true" row="3" isEnabled="false" visibility="{{ wineTasting.wineType.code === 'WHITE' ? 'visible' : 'collapse'}}" />
				<Label text="Finale" row="4" class="criterias-title" />
				<vs:ValuesSelector items="{{ wineTasting.length }}" deleteOnClick="true" row="5" isEnabled="false" />
                <TextView hint="Commentaires" text="{{ wineTasting.tasteTabNotes }}" row="6" isEnabled="false" />
            </GridLayout>
          </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Synthèse">
	   <TabViewItem.view>
		   <ScrollView>
			<GridLayout class="tab-view-content" columns="auto,*" rows="*,*,*,*">
				<fr:FinalRating selectedValue="{{ wineTasting.finalRating }}" style="margin-top: 8;horizontal-align: center;" colspan="2" isEnabled="false" />
                <Label text="Date" row="1" class="criterias-title" />
				<Label text="{{ wineTasting.endDate | dateConverter}}" class="criterias-label" row="1" col="1" />
                <TextView text="{{ wineTasting.meatsNotes }}" hint="Accord mets & vin" row="2" colspan="2" isEnabled="false" />
				<TextView text="{{ wineTasting.synthesisTabNotes }}" hint="Commentaires" row="3" colspan="2" isEnabled="false" />
			</GridLayout>
		   </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
   </TabView.items>
 </TabView>
</Page>
