<Page xmlns="http://schemas.nativescript.org/tns.xsd"
        xmlns:dd="nativescript-drop-down"
        xmlns:gcp="components/gradient-color-picker"
        xmlns:fr="components/final-rating"
        xmlns:vs="components/values-selector"
        navigatedTo="navigatedTo">
  <Page.actionBar>
    <ActionBar title="Nouvelle dégustation">
      <NavigationButton icon="res://ic_close_white_24dp" tap="cancel"/>
      <ActionBar.actionItems>
        <ActionItem icon="res://ic_check_white_24dp" ios.position="right" android.position="actionBar" tap="onSaveTasting"/>
      </ActionBar.actionItems>
    </ActionBar>
  </Page.actionBar>
  <TabView selectedColor="#FFFFFF">
   <TabView.items>
     <TabViewItem title="Vin">
       <TabViewItem.view>
        <ScrollView>
          <StackLayout class="tab-view-content">
            <TextField text="{{ wineTasting.estate }}" hint="Domaine" class="form-item" />
            <TextField text="{{ wineTasting.cuvee }}" hint="Cuvée" class="form-item" />
            <TextField text="{{ wineTasting.country }}" hint="Pays" class="form-item" />
            <TextField text="{{ wineTasting.region }}" hint="Région" class="form-item" />
            <TextField text="{{ wineTasting.aoc }}" hint="AOC" class="form-item" />
            <GridLayout columns="*,*,*,*" class="form-item" style="padding-left: 6">
                <Label text="Année" />
                <dd:DropDown col="1" items="{{ years }}" selectedIndex="{{ yearSelectedIndex }}" />
                <Label text="Couleur" col="2" style="padding-left: 6" />
                <dd:DropDown col="3" items="{{ wineTypes }}" selectedIndex="{{ wineTypeSelectedIndex }}" />
            </GridLayout>
            <GridLayout columns="100, *" style="padding-left: 6">
                <StackLayout orientation="horizontal" style="vertical-align: center;">
                    <Label text="{{ alcoholFromattedValue }}" />
                    <Label text="% Alcool" />
                </StackLayout>
                <Slider id="alcohol-slider" value="{{ alcoholValue }}" minValue="30" maxValue="180" col="1" />
            </GridLayout>
            <GridLayout class="form-item" style="padding-left: 6">
                <Label text="Biologique" style="vertical-align: center;horizontal-align: left" width="100" />
                <Switch checked="{{ wineTasting.isBiologic }}" style="horizontal-align: right;" />
            </GridLayout>
            <GridLayout class="form-item" style="padding-left: 6">
                <Label text="Biodynamique" style="vertical-align: center;horizontal-align: left" width="100" />
                <Switch checked="{{ wineTasting.isBiodynamic }}" style="horizontal-align: right;" />
            </GridLayout>
            <GridLayout columns="auto, *" style="padding-left: 6; padding-bottom: 8; min-height: 48">
                <Label text="Cépages" style="vertical-align: center;horizontal-align: left" width="100" />
                <TextView hint="Ajouter un cépage" col="1" />
            </GridLayout>
            <TextView text="{{ wineTasting.wineTabNotes }}" hint="Commentaires" />
           </StackLayout>
          </ScrollView>
       </TabViewItem.view>
     </TabViewItem>
     <TabViewItem title="Aspect">
       <TabViewItem.view>
          <ScrollView>
            <StackLayout class="tab-view-content">
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6; padding-top: 8">
                    <Label text="Limpidité" />
                    <vs:ValuesSelector items="{{ limpidityCriterias }}" singleSelection="true" col="1" />
                    <TextField hint="Autres" col="1" row="1" />
                </GridLayout>
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6">
                    <Label text="Intensité" />
                    <vs:ValuesSelector items="{{ sightIntensityCriterias }}" singleSelection="true" col="1" />
                    <TextField hint="Autres" col="1" row="1" />
                </GridLayout>
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6">
                    <Label text="Nuance" />
                    <Button text="Définir" tap="onSelectColor" col="1" visibility="{{ wineTasting.color ? 'collapsed' : 'visible' }}" />
                    <Button tap="onSelectColor" col="1" backgroundColor="{{wineTasting.color}}" visibility="{{ wineTasting.color ? 'visible' : 'collapsed' }}" />
                </GridLayout>
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6">
                    <Label text="Larmes" />
                    <vs:ValuesSelector items="{{ tearCriterias }}" col="1" />
                    <TextField hint="Autres" col="1" row="1" />
                </GridLayout>
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6">
                    <Label text="Bulles" />
                    <vs:ValuesSelector items="{{ bubbleCriterias }}" singleSelection="true" col="1" />
                    <TextField hint="Autres" col="1" row="1" />
                </GridLayout>
                <TextView text="{{ wineTasting.sightTabNotes }}" hint="Commentaires" />
            </StackLayout>
          </ScrollView>
       </TabViewItem.view>
     </TabViewItem>
     <TabViewItem title="Arômes">
       <TabViewItem.view>
        <ScrollView>
            <StackLayout class="tab-view-content">
                <StackLayout orientation="vertical" style="padding-left: 6; padding-top: 8">
                    <Button text="Ajouter" tap="onAddAromas" />
                    <vs:ValuesSelector items="{{ wineTasting.aromas }}" deleteOnClick="true" />
                    <TextField hint="Autres" col="1" row="1" />
                </StackLayout>
                <GridLayout columns="100, *" rows="*, auto" style="padding-left: 6">
                    <Label text="Intensité" />
                    <vs:ValuesSelector items="{{ smellIntensityCriterias }}" singleSelection="true" col="1" />
                    <TextField hint="Autres" col="1" row="1" />
                </GridLayout>
                <TextView text="{{ wineTasting.smellTabNotes }}" hint="Commentaires" />
            </StackLayout>
          </ScrollView>
       </TabViewItem.view>
     </TabViewItem>
     <TabViewItem title="Saveurs">
       <TabViewItem.view>
          <Label text="Saveurs" />
       </TabViewItem.view>
     </TabViewItem>
     <TabViewItem title="Synthèse">
       <TabViewItem.view>
           <ScrollView>
            <StackLayout class="tab-view-content">
                <GridLayout class="form-item" style="padding-left: 6" columns="100, *">
                    <Label text="Note globale" style="vertical-align: center;horizontal-align: left" />
                    <fr:FinalRating col="1" style="horizontal-align: center" selectedValue="{{ wineTasting.finalRating }}" />
                </GridLayout>
                <GridLayout class="form-item" style="padding-left: 6; padding-right: 6">
                    <Label text="Date" style="vertical-align: center;horizontal-align: left" width="100" />
                    <Label text="{{ wineTasting.startDate | dateConverter}}" style="vertical-align: center;horizontal-align: right" />
                </GridLayout>
                <TextView text="{{ wineTasting.synthesisTabNotes }}" hint="Commentaires" />
            </StackLayout>
           </ScrollView>
       </TabViewItem.view>
     </TabViewItem>
   </TabView.items>
 </TabView>
</Page>
