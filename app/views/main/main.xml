<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:FAB="nativescript-floatingactionbutton"
      navigatedTo="navigatedTo">
  <Page.actionBar>
    <ActionBar>
      <ActionBar.actionItems>
        <ActionItem text="Import/Export" ios.position="right" android.position="popup" tap="onExportTastings" />
        <!--<ActionItem text="Changer mot de passe" ios.position="right" android.position="popup" tap="onChangePassword" />-->
      </ActionBar.actionItems>
    </ActionBar>
  </Page.actionBar>
  <GridLayout>
    <ListView items="{{ tastings }}" visibility="{{ tastings && tastings.length !== 0 ? 'visible' : 'collapse' }}" itemTap="onViewTasting" id="tastings-list">
        <ListView.itemTemplate>
            <GridLayout columns="auto, *, auto" class="list-item">
                <StackLayout backgroundColor="{{ color }}" class="list-item-icon" />
                <StackLayout col="1">
                    <Label text="{{ cuvee }}" visibility="{{ cuvee | visibilityConverter }}" class="list-item-title" />
                    <Label text="{{ estate }}" visibility="{{ estate | visibilityConverter }}" class="list-item-title" />
                    <Label text="{{ 'AOC ' + aoc.label }}" visibility="{{ aoc | visibilityConverter }}" class="list-item-secondary" />
                    <Label text="{{ $value | regionConverterConverter }}" />
                </StackLayout>
                <StackLayout col="2">
                    <Label text="{{ year }}" class="list-item-secondary" />
                    <Label text="{{ finalRating | finalRatingToImageConverter }}" class="{{ finalRating ? 'material-icon final-rating final-rating-' + finalRating : 'material-icon final-rating' }}" />
                </StackLayout>
            </GridLayout>
        </ListView.itemTemplate>
    </ListView>
    <FAB:fab visibility="{{ tastings && tastings.length !== 0 ? 'visible' : 'collapse' }}"
        tap="onCreateNewTasting"
        icon="res://ic_add_white_24dp"
        rippleColor="#f1f1f1"
        hideOnSwipeOfView="tastings-list"
        class="fab-button" />

    <StackLayout visibility="{{ !tastings || tastings.length === 0  ? 'visible' : 'collapse'}}" class="empty-container">
        <StackLayout class="empty-message">
            <Label class="winenjoy-icon" text="&#xe900;" />
            <Label text="Aucune dégustation" class="no-tasting-message" />
        </StackLayout>
        <Button text="Créer une dégustation" class="first-tasting-button" tap="onCreateFirstTasting" />
    </StackLayout>
  </GridLayout>
</Page>
