<Page xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:FAB="nativescript-floatingactionbutton"
      navigatedTo="navigatedTo">
    <Page.actionBar>
        <ActionBar title="Winenjoy - v0.1 beta" />
    </Page.actionBar>
  <GridLayout>
    <ListView items="{{ tastings }}" visibility="{{ tastings && tastings.length !== 0 && !betaIsClosed ? 'visible' : 'collapse' }}" itemTap="onViewTasting" id="tastings-list">
        <ListView.itemTemplate>
            <GridLayout class="list-item" rows="*,*,*" columns="56, *, auto">
                <StackLayout backgroundColor="{{ color }}" class="list-item-icon" rowSpan="3" id="toto" />
                <Label text="{{ cuvee }}" class="list-item-title" col="1" />
                <Label text="{{ estate }}" class="list-item-secondary" row="1" col="1" />
                <Label text="{{ $value | wineLocationConverter }}" class="list-item-secondary" row="2" col="1" />
                <Label text="{{ year }}" class="list-item-secondary" col="2" />
                <Image src="{{ finalRating | finalRatingToImageConverter }}" col="2" row="1" rowspan="2" height="24" width="24" />
            </GridLayout>
        </ListView.itemTemplate>
    </ListView>
    <FAB:fab visibility="{{ tastings && tastings.length !== 0 && !betaIsClosed ? 'visible' : 'collapse' }}"
        tap="onCreateNewTasting"
        icon="res://ic_add_white_24dp"
        rippleColor="#f1f1f1"
        hideOnSwipeOfView="tastings-list"
        class="fab-button" />

    <StackLayout visibility="{{ !tastings || tastings.length === 0  ? 'visible' : 'collapse'}}" class="empty-container">
        <StackLayout class="empty-message">
            <Label class="winenjoy-icon" text="&#xe900;" />
            <Label text="Aucune dégustation" class="no-tasting-message" />
        </StackLayout>
        <Button text="Créer une dégustation" class="first-tasting-button" tap="onCreateFirstTasting" />
    </StackLayout>

    <Label text="Cette version beta est terminée. Merci." class="beta-message" visibility="{{ betaIsClosed ? 'visible' : 'collapse' }}"/>
  </GridLayout>
</Page>
