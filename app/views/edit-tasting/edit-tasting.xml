<Page xmlns="http://schemas.nativescript.org/tns.xsd"
        xmlns:gcp="components/gradient-color-picker"
        xmlns:fr="components/final-rating"
        xmlns:vs="components/values-selector"
		navigatedTo="navigatedTo">
  <Page.actionBar>
	<ActionBar title="Nouvelle dégustation">
	  <NavigationButton icon="res://ic_close_white_24dp" tap="cancel"/>
	  <ActionBar.actionItems>
		<ActionItem icon="res://ic_check_white_24dp"
                    ios.position="right"
                    android.position="actionBar"
                    tap="onSaveTasting" />
	  </ActionBar.actionItems>
	</ActionBar>
  </Page.actionBar>
  <TabView selectedColor="#FFFFFF" selectedIndex="{{ tabSelectedIndex }}">
   <TabView.items>
	 <TabViewItem title="Vin">
	   <TabViewItem.view>
		<ScrollView>
			<GridLayout columns="auto,*" rows="*,*,*,*,*,*,*,*,*,*,*" class="tab-view-content">
                <SegmentedBar colspan="2" selectedIndex="{{ wineTypeSelectedIndex }}">
                    <SegmentedBar.items>
                        <SegmentedBarItem title="Blanc" />
                        <SegmentedBarItem title="Rosé" />
                        <SegmentedBarItem title="Rouge" />
                    </SegmentedBar.items>
                </SegmentedBar>
				<TextField text="{{ wineTasting.cuvee }}" hint="Cuvée" row="1" colspan="2" id="cuvee-field" />
                <TextField text="{{ wineTasting.estate }}" hint="Domaine" row="2" colspan="2" />
                <TextField text="{{ wineTasting.region }}" hint="Région" row="3" colspan="2" />
                <Label text="Pays" row="4" class="criterias-title" />
                <Button text="Sélectionner" tap="onSelectCountry" row="4" col="1" visibility="{{ wineTasting.country ? 'collapse' : 'visible' }}" />
                <Button text="{{ (wineTasting.country ||{}).label }}" tap="onDeleteCountry" row="4" col="1" style="background-color: white" visibility="{{ wineTasting.country ? 'visible' : 'collapse' }}" />
                <TextView hint="Cépages" row="5" colspan="2" text="{{ wineTasting.grapes }}" />
                <Label text="{{ wineYear ? wineYear : 'Année' }}" row="6" class="criterias-title-no-margin" width="70" />
				<Slider value="{{ wineYear }}" minValue="1950" maxValue="2016" row="6" col="1" class="criterias-margin" />
				<Label text="{{ alcoholFromattedValue ? alcoholFromattedValue + '%' : '% Alcool' }}" row="7" class="criterias-title-no-margin" width="70" />
				<Slider id="alcohol-slider" value="{{ alcoholValue }}" minValue="30" maxValue="180" row="7" col="1" class="criterias-margin" />
				<Label text="Biologique" row="8" colspan="2" class="criterias-title" />
				<Switch checked="{{ wineTasting.isBiologic }}" row="8" col="1" />
				<Label text="Biodynamique" row="9" colspan="2" class="criterias-title" />
				<Switch checked="{{ wineTasting.isBiodynamic }}" row="9" col="1" />
				<TextView text="{{ wineTasting.wineTabNotes }}" hint="Commentaires" row="10" colspan="2" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Aspect">
	   <TabViewItem.view>
		  <ScrollView>
            <GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*,auto,*,auto,auto" columns="*, auto">
                <Button text="Sélectionner la robe" tap="onSelectColor" visibility="{{ wineTasting.color ? 'collpase' : 'visible' }}" colspan="2" class="modal-button" />
                <Button text="Supprimer la robe" tap="onDeleteColor" color="{{wineTasting.color | foregroundColorConverter}}" backgroundColor="{{wineTasting.color}}" visibility="{{ wineTasting.color ? 'visible' : 'collapse' }}" colspan="2" />
				<Label text="Limpidité" class="criterias-title" row="1" colspan="2" />
				<vs:ValuesSelector items="{{ limpidityCriterias }}" selectedItems="{{ wineTasting.limpidities }}" row="2" colspan="2" />
				<Label text="Brillance" class="criterias-title" row="3" colspan="2" />
				<vs:ValuesSelector items="{{ shineCriterias }}" selectedItems="{{ wineTasting.shines }}" row="4" colspan="2" />
                <Label text="Larmes" class="criterias-title" row="5" colspan="2" />
				<vs:ValuesSelector items="{{ tearCriterias }}" selectedItems="{{ wineTasting.tears }}" row="6" colspan="2" />
                <Label text="Bulles" class="criterias-title" row="7" />
                <Switch style="horizontal-align: right" checked="{{ hasBubbles }}" row="7" col="1" />
				<vs:ValuesSelector items="{{ bubbleCriterias }}" selectedItems="{{ wineTasting.bubbles }}" visibility="{{ hasBubbles ? 'visible' : 'collapse' }}" row="8" colspan="2" />
				<TextView text="{{ wineTasting.sightTabNotes }}" hint="Commentaires" row="9" colspan="2" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Arômes">
	   <TabViewItem.view>
		<ScrollView>
			<GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*">
				<Button text="Sélectionner les arômes" tap="onAddAromas" class="modal-button" />
				<vs:ValuesSelector items="{{ wineTasting.aromas }}" deleteOnClick="true" row="1" />
                <Button text="Sélectionner les défauts" tap="onAddDefects" row="2" class="modal-button" />
				<vs:ValuesSelector items="{{ wineTasting.defects }}" deleteOnClick="true" row="3" />
				<Label text="Intensité" row="4" class="criterias-title" />
				<vs:ValuesSelector items="{{ intensityCriterias }}" selectedItems="{{ wineTasting.intensities }}" row="5" />
				<TextView text="{{ wineTasting.smellTabNotes }}" hint="Commentaires" row="6" />
			</GridLayout>
		  </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Saveurs">
	   <TabViewItem.view>
		  <ScrollView>
			<GridLayout class="tab-view-content" rows="*,*,*,*,*,*,*">
                <Label text="Attaque" class="criterias-title" />
                <vs:ValuesSelector items="{{ attackCriterias }}" selectedItems="{{ wineTasting.attacks }}" row="1" />
                <Label text="Equilibre" class="criterias-title" row="2" />
                <vs:ValuesSelector items="{{ tannicCriterias }}" selectedItems="{{ wineTasting.balances }}" row="3" visibility="{{ (wineTasting.wineType.code === 'RED' || wineTasting.wineType.code === 'ROSE') ? 'visible' : 'collapse'}}" />
                <vs:ValuesSelector items="{{ acidityCriterias }}" selectedItems="{{ wineTasting.balances }}" row="3" visibility="{{ wineTasting.wineType.code === 'WHITE' ? 'visible' : 'collapse'}}" />
				<Label text="Finale" row="4" class="criterias-title" />
				<vs:ValuesSelector items="{{ lengthCriterias }}" selectedItems="{{ wineTasting.length }}" row="5" />
                <TextView hint="Commentaires" text="{{ wineTasting.tasteTabNotes }}" row="6" />
            </GridLayout>
          </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
	 <TabViewItem title="Synthèse">
	   <TabViewItem.view>
		   <ScrollView>
			<GridLayout class="tab-view-content" columns="auto,*" rows="*,*,*,*">
				<fr:FinalRating selectedValue="{{ wineTasting.finalRating }}" style="margin-top: 8;horizontal-align: center;" colspan="2" />
                <Label text="Date" row="1" class="criterias-title" />
				<Label text="{{ wineTasting.startDate | dateConverter}}" class="criterias-label" row="1" col="1" />
                <TextView text="{{ wineTasting.meatsNotes }}" hint="Accord mets & vin" row="2" colspan="2" />
				<TextView text="{{ wineTasting.synthesisTabNotes }}" hint="Commentaires" row="3" colspan="2" />
			</GridLayout>
		   </ScrollView>
	   </TabViewItem.view>
	 </TabViewItem>
   </TabView.items>
 </TabView>
</Page>
